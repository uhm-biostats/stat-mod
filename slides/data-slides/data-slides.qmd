---
title: "Introducing data we'll work with"
---



```{r}
#| label: setup
#| echo: false
#| message: false
#| warning: false


library(ggplot2)
library(knitr)
library(dplyr)

opts_chunk$set(echo = FALSE, 
                      message = FALSE, 
                      warning = FALSE)

tree <- read.csv("../../data/OpenNahele_Tree_Data.csv")

```


## Introducing the data

We will use the [*OpenNahele*](https://datadryad.org/dataset/doi:10.5061/dryad.1kk02qr){target="_blank"} forest inventory plot data [@craven2018]


![](../../docs/datasets-intro_files/figure-html/fig-map-1.png)



## Introducing the data

<br>

::: columns

:::: {.column width="60%"} 

![](../../docs/datasets-intro_files/figure-html/fig-map-1.png)

<!-- instead need to make local img dir and ref that -->
<!-- or maybe if data-slides folder lives in root itʻll all work -->

::::

:::: {.column width="40%"}

- **Open** as in *open* source, *open* access
- [**Nahele**](https://wehe.hilo.hawaii.edu/?q=nahele#w2w2-15258){target="_blank"} as in forest ma ka ʻōlelo Hawaiʻi

::::

:::

What does using ʻōlelo Hawaiʻi in the name indicate?

## Introducing the data

We will also use data from

- the [Hawaiʻi Climate Data Portal](https://www.hawaii.edu/climate-data-portal/climate-atlas/){target="_blank"} [@mclean2023]
- a data publication by @craven2019

## These data have metadata {.scrollable}

### `README_for_OpenNahele_Tree_Data.txt`

```{r}
#| label: tree-meta

tmeta <- read.table("../../data/README_for_OpenNahele_Tree_Data.txt", 
                    sep = "\t", 
                    header = TRUE)
names(tmeta) <- gsub("\\.", " ", names(tmeta))

kable(tmeta)
```

## These data have metadata {.scrollable}

### `README_for_plot_climate.txt`

```{r}
#| label: clim-meta

cmeta <- read.table("../../data/README_for_plot_climate.txt", 
                    sep = "\t", 
                    header = TRUE)
names(cmeta) <- gsub("\\.", " ", names(cmeta))

kable(cmeta)
```

## These data have metadata {.scrollable}

### `README_for_hii_geo.txt`

```{r}
gmeta <- read.table("../../data/README_for_hii_geo.txt", 
                    sep = "\t", 
                    header = TRUE)
names(gmeta) <- gsub("\\.", " ", names(gmeta))

kable(gmeta)

```


## Working with the data

We will not go into visualizing and numerically describing the data just yet---that will be saved as exercises for getting (re-)acquainted with R.


## Working with the data

### Biocultural dimensions

- Plants are kin
- [Lāʻau lapaʻau](https://wehe.hilo.hawaii.edu/?q=laau%20lapaau#w2w2-37956){target="_blank"} and ethnobotanical connections to plants
- ʻŌiwi geographies including [wahi pana](https://wehe.hilo.hawaii.edu/?q=wahi%20pana#w2w2-33435) and different categories of wao (e.g. [wao akua](https://wehe.hilo.hawaii.edu/?q=wao%20akua#w2w2-72767))


## Biocultural dimensions

### Plants are kin: He Kumulipo + nā moʻolelo

::: columns

:::: {.column width="60%"}

![*Kumulipo* - Ipo Nihipali](../../img/data-intro/kumulipo-ipo-nihipali.jpeg)
::::

:::: {.column width="40%"}

![*Hāloa* - Maggie T. Sutrov](../../img/data-intro/haloa.png)

::::

:::


## Biocultural dimensions

### Lāʻau lapaʻau and ethnobotany

```{r}
#| label: ethnobot
#| fig-width: 10
#| fig-height: 4
#| fig-align: "center"

library(cowplot)

laau <- read.csv("../../data_raw/ethnobotany_bishop.csv") |> 
    rename(name = Hawaiian.Name, 
           latin_name = Scientific.Name, 
           haole_name = Vernacular.Name) |> 
    mutate(latin_name = gsub(" \\(.*", "", latin_name))

in_laau <- select(tree, Scientific_name) |> 
    mutate(genus = gsub(" .*", "", Scientific_name)) |> 
    group_by(Scientific_name) |> 
    mutate(in_laau = paste(first(Scientific_name), first(genus), sep = "|") |> 
               grepl(laau$latin_name) |> 
               any()) |> 
    ungroup()


laau2plot <- tibble(`Individual trees` = c(sum(in_laau$in_laau), 
                             nrow(in_laau)), 
                   `Unique species` = c(sum(in_laau$in_laau[!duplicated(in_laau)]), 
                           sum(!duplicated(in_laau))))
laau2plot[2, ] <- laau2plot[2, ] - laau2plot[1, ]
laau2plot$ethno <- c("Yes", "No")

laau2plot <- tidyr::pivot_longer(laau2plot, -ethno)

prop_stem_in_laau <- mean(in_laau$in_laau)
prop_spp_in_laau <- mean(in_laau$in_laau[!duplicated(in_laau)])

ggplot(laau2plot, aes(name, value, fill = ethno)) +
    geom_bar(stat = "identity") +
    facet_wrap(vars(name), nrow = 1, scales = "free", 
               labeller = label_wrap_gen(10)) +
    theme_cowplot() +
    scale_fill_discrete(palette = c("black", hsv(0.5, 0.6, 0.6))) +
    geom_text(aes(label = c(paste0(round(prop_stem_in_laau * 100, 0), "%"), 
                            paste0(round(prop_spp_in_laau * 100, 0), "%"),
                            "", "")),
              size = 10,
              position = position_stack(vjust = 0.5)) +
    ylab("Count") + 
    labs(fill = "In Ethnobotany\nDatabase") + 
    theme(axis.title.x=element_blank(),
          axis.text.x=element_blank(),
          axis.ticks.x=element_blank(), 
          axis.title = element_text(size = 30), 
          axis.text = element_text(size = 20), 
          axis.ticks = element_line(linewidth = 1), 
          line = element_line(linewidth = 1), 
          legend.text = element_text(size = 20), 
          legend.title = element_text(size = 20), 
          strip.text = element_text(size = 30))

```

[Hawaiian ethnobotany database](https://data.bishopmuseum.org/ethnobotanydb/ethnobotany.php?b=list&o=1) built largely on the work of esteemed ʻŌiwi scholar Isabella Aiona Abbott [-@abbott1992]


## Biocultural dimensions

### ʻŌiwi geographies

::: columns

:::: {.column width="40%"}

**Wahi pana**

![e.g. Puʻu Pueo](../../img/data-intro/puupueo.png){width="70%"}

::::

:::: {.column width="60%"}

```{r}
prop_native_plot <- group_by(tree, PlotID) |> 
    summarize(prop_native = mean(Native_Status == "native"))

prcnt_native <- round(mean(prop_native_plot$prop_native >= 0.75) * 100)
```

**Wao** (`r prcnt_native`% of plots in wao akua?)

![image source: @winter2018](../../img/data-intro/wao.png){width="80%"}

::::

:::

## Ecological questions we'll consider

**First:** A thought on whose knowledge counts as science

![source: @gon2018](../../img/data-intro/gon.png)

## Ecological questions we'll consider

- How have ecology and evolution played out across the multi-million year chronosequence of the pae ʻāina to shape differences in biodiversity across and within islands [investigated, e.g., by @gillespie2016; @rominger2016]?
- How have human impacts and climatic variables modulated biodiversity [investigated, e.g., by @lim2021; @hutchins2023]
- Can data on human impacts and climate help us understand how invasive/non-native species occupy ecosystems [investigated, e.g., by @blackburn2011; @fortini2013]

## References
